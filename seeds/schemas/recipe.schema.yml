# ═══════════════════════════════════════════════════════════════════════════════
# RECIPE SCHEMA v1.0
# A recipe declares a composed workflow of primitives.
# ═══════════════════════════════════════════════════════════════════════════════

recipe:
  type: object
  required: [name, version, requires, steps]
  properties:
  
    # ───────────────────────────────────────────────────────────────────────────
    # IDENTITY
    # ───────────────────────────────────────────────────────────────────────────
    name: { type: string, description: "Human-readable recipe name" }
    version: { type: string, description: "Semantic version" }
    description: { type: string, description: "What this recipe does" }
    
    # ───────────────────────────────────────────────────────────────────────────
    # REQUIREMENTS
    # ───────────────────────────────────────────────────────────────────────────
    requires:
      type: array
      items: { type: string }
      description: "Dataset semantic_types this recipe needs"
    
    # ───────────────────────────────────────────────────────────────────────────
    # SCOPE REQUIREMENTS
    # ───────────────────────────────────────────────────────────────────────────
    scope_requirements:
      type: object
      properties:
        min_features: { type: integer }
        max_resolution_meters: { type: number }
        warn_if_sampled: { type: boolean }
    
    # ───────────────────────────────────────────────────────────────────────────
    # PARAMETERS
    # ───────────────────────────────────────────────────────────────────────────
    parameters:
      type: object
      additionalProperties:
        type: object
        properties:
          type: { type: string, enum: [integer, number, string, boolean, enum] }
          default: {}
          description: { type: string }
          options: { type: array }
    
    # ───────────────────────────────────────────────────────────────────────────
    # STEPS
    # ───────────────────────────────────────────────────────────────────────────
    steps:
      type: array
      items:
        type: object
        required: [id, primitives]
        properties:
          id: { type: string }
          primitives:
            type: array
            items:
              type: object
